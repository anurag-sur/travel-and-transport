<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Transport AR – Markerless</title>

<!-- A-FRAME -->
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
}

#loading {
  position: fixed;
  inset: 0;
  background: black;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  z-index: 10;
}
</style>
</head>

<body>

<div id="loading">Loading 3D Models…</div>

<a-scene
  embedded
  vr-mode-ui="enabled:false"
  renderer="colorManagement:true"
  device-orientation-permission-ui="enabled:true">

  <!-- CAMERA -->
  <a-camera position="0 1.6 0" look-controls wasd-controls></a-camera>

  <!-- LIGHTS -->
  <a-entity light="type:ambient; intensity:1"></a-entity>
  <a-entity light="type:directional; intensity:1" position="0 5 5"></a-entity>

  <!-- MODELS -->
  <a-entity id="models" position="0 0 -3"></a-entity>

</a-scene>

<script>
const vehicles = [
  {
    model: "models/car/scene.gltf",
    scale: "0.6 0.6 0.6",
    position: "0 0 0"
  },
  {
    model: "models/bike/scene.gltf",
    scale: "0.5 0.5 0.5",
    position: "2 0 0"
  },
  {
    model: "models/helicopter/scene.gltf",
    scale: "0.3 0.3 0.3",
    position: "-2 1 0"
  },
  {
    model: "models/submarine/scene.gltf",
    scale: "0.4 0.4 0.4",
    position: "0 -1.2 0"
  }
];

const container = document.getElementById("models");
let loaded = 0;

vehicles.forEach(v => {
  const e = document.createElement("a-entity");
  e.setAttribute("gltf-model", v.model);
  e.setAttribute("scale", v.scale);
  e.setAttribute("position", v.position);
  e.setAttribute("rotation", "0 45 0");

  e.addEventListener("model-loaded", () => {
    loaded++;
    if (loaded === vehicles.length) {
      document.getElementById("loading").style.display = "none";
    }
  });

  e.addEventListener("model-error", () => {
    console.error("Failed to load:", v.model);
    loaded++;
  });

  container.appendChild(e);
});
</script>

</body>
</html>
